#!/bin/bash

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Ø§Ø®ØªØ¨Ø§Ø± Ø¬Ù…ÙŠØ¹ API Endpoints
# ÙŠØ®ØªØ¨Ø± ÙƒÙ„ endpoint ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù… Ø¨Ø´ÙƒÙ„ Ø´Ø§Ù…Ù„
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

set -e

API_BASE="http://localhost:8000"
ADMIN_TOKEN="${ADMIN_TOKEN:-test-admin-token}"

echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "ğŸ”— Ø§Ø®ØªØ¨Ø§Ø± Ø¬Ù…ÙŠØ¹ API Endpoints"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""

FAILED=0
TOTAL_TESTS=0

# Ø¯Ø§Ù„Ø© Ù„ØªØ³Ø¬ÙŠÙ„ Ù†ØªÙŠØ¬Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±
log_test() {
    local test_name="$1"
    local result="$2"
    TOTAL_TESTS=$((TOTAL_TESTS + 1))
    
    if [ "$result" = "pass" ]; then
        echo "âœ… [$TOTAL_TESTS] $test_name"
    else
        echo "âŒ [$TOTAL_TESTS] $test_name"
        FAILED=$((FAILED + 1))
    fi
}

# Ø¯Ø§Ù„Ø© Ù„Ø§Ø®ØªØ¨Ø§Ø± GET endpoint
test_get() {
    local endpoint="$1"
    local description="$2"
    local expected_code="${3:-200}"
    local auth="${4:-}"
    
    local headers=""
    if [ -n "$auth" ]; then
        headers="-H \"Authorization: Bearer $auth\""
    fi
    
    local response_code=$(eval curl -s -o /dev/null -w "%{http_code}" $headers "$API_BASE$endpoint" 2>/dev/null || echo "000")
    
    if [ "$response_code" = "$expected_code" ]; then
        log_test "GET $endpoint - $description" "pass"
        return 0
    else
        log_test "GET $endpoint - $description (ØªÙˆÙ‚Ø¹ $expected_codeØŒ Ø­ØµÙ„ Ø¹Ù„Ù‰ $response_code)" "fail"
        return 1
    fi
}

# Ø¯Ø§Ù„Ø© Ù„Ø§Ø®ØªØ¨Ø§Ø± POST endpoint
test_post() {
    local endpoint="$1"
    local description="$2"
    local data="$3"
    local expected_code="${4:-200}"
    local auth="${5:-}"
    
    local headers="-H \"Content-Type: application/json\""
    if [ -n "$auth" ]; then
        headers="$headers -H \"Authorization: Bearer $auth\""
    fi
    
    local response_code=$(eval curl -s -o /dev/null -w "%{http_code}" -X POST $headers -d "'$data'" "$API_BASE$endpoint" 2>/dev/null || echo "000")
    
    if [ "$response_code" = "$expected_code" ]; then
        log_test "POST $endpoint - $description" "pass"
        return 0
    else
        log_test "POST $endpoint - $description (ØªÙˆÙ‚Ø¹ $expected_codeØŒ Ø­ØµÙ„ Ø¹Ù„Ù‰ $response_code)" "fail"
        return 1
    fi
}

# â•â•â• Ø§Ù„Ù…Ø±Ø­Ù„Ø© 1: Endpoints Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© â•â•â•
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "ğŸ  Ø§Ù„Ù…Ø±Ø­Ù„Ø© 1: Endpoints Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"

test_get "/" "Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"
test_get "/health" "ÙØ­Øµ Ø§Ù„ØµØ­Ø©"
test_get "/docs" "ØªÙˆØ«ÙŠÙ‚ Swagger"
test_get "/openapi.json" "Ù…Ø®Ø·Ø· OpenAPI"

# â•â•â• Ø§Ù„Ù…Ø±Ø­Ù„Ø© 2: Authentication Endpoints â•â•â•
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "ğŸ” Ø§Ù„Ù…Ø±Ø­Ù„Ø© 2: Authentication Endpoints"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"

# Ø§Ø®ØªØ¨Ø§Ø± ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ (Ø¨Ø¯ÙˆÙ† Ø¨ÙŠØ§Ù†Ø§Øª - ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙØ´Ù„)
test_post "/api/v1/auth/login" "ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ø¯ÙˆÙ† Ø¨ÙŠØ§Ù†Ø§Øª" "{}" "422"

# Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØ³Ø¬ÙŠÙ„ (Ø¨Ø¯ÙˆÙ† Ø¨ÙŠØ§Ù†Ø§Øª - ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙØ´Ù„)
test_post "/api/v1/auth/register" "Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø¨Ø¯ÙˆÙ† Ø¨ÙŠØ§Ù†Ø§Øª" "{}" "422"

# Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ (Ø¨Ø¯ÙˆÙ† token - ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙØ´Ù„)
test_get "/api/v1/auth/me" "Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø¯ÙˆÙ† token" "401"

# Ø§Ø®ØªØ¨Ø§Ø± ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
test_post "/api/v1/auth/me" "ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø¯ÙˆÙ† token" "{}" "401"

# Ø§Ø®ØªØ¨Ø§Ø± ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
test_post "/api/v1/auth/logout" "ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ø¨Ø¯ÙˆÙ† token" "{}" "401"

# â•â•â• Ø§Ù„Ù…Ø±Ø­Ù„Ø© 3: Tasks Endpoints â•â•â•
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "ğŸ“‹ Ø§Ù„Ù…Ø±Ø­Ù„Ø© 3: Tasks Endpoints"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"

# Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù‡Ø§Ù…
test_get "/api/v1/tasks" "Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù‡Ø§Ù… Ø¨Ø¯ÙˆÙ† token" "401"

# Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù‡Ù…Ø©
test_post "/api/v1/tasks" "Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù‡Ù…Ø© Ø¨Ø¯ÙˆÙ† token" '{"goal":"test"}' "401"

# Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ù‡Ù…Ø© Ù…Ø­Ø¯Ø¯Ø©
test_get "/api/v1/tasks/test-task-id" "Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ù‡Ù…Ø© Ø¨Ø¯ÙˆÙ† token" "401"

# ØªØ­Ø¯ÙŠØ« Ù…Ù‡Ù…Ø©
test_post "/api/v1/tasks/test-task-id" "ØªØ­Ø¯ÙŠØ« Ù…Ù‡Ù…Ø© Ø¨Ø¯ÙˆÙ† token" "{}" "401"

# Ø­Ø°Ù Ù…Ù‡Ù…Ø©
test_post "/api/v1/tasks/test-task-id/cancel" "Ø¥Ù„ØºØ§Ø¡ Ù…Ù‡Ù…Ø© Ø¨Ø¯ÙˆÙ† token" "{}" "401"

# Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ù…Ù‡Ù…Ø©
test_get "/api/v1/tasks/test-task-id/events" "Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ù…Ù‡Ù…Ø© Ø¨Ø¯ÙˆÙ† token" "401"

# â•â•â• Ø§Ù„Ù…Ø±Ø­Ù„Ø© 4: Uploads Endpoints â•â•â•
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "ğŸ“¤ Ø§Ù„Ù…Ø±Ø­Ù„Ø© 4: Uploads Endpoints"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"

# Ø·Ù„Ø¨ Ø±ÙØ¹ Ù…Ù„Ù
test_post "/api/v1/uploads/request" "Ø·Ù„Ø¨ Ø±ÙØ¹ Ù…Ù„Ù Ø¨Ø¯ÙˆÙ† token" '{"filename":"test.txt","content_type":"text/plain","size":100}' "401"

# callback Ø±ÙØ¹ Ù…Ù„Ù
test_post "/api/v1/uploads/callback" "callback Ø±ÙØ¹ Ù…Ù„Ù Ø¨Ø¯ÙˆÙ† token" '{"object_key":"test"}' "401"

# Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø±Ø§Ø¨Ø· ØªØ­Ù…ÙŠÙ„
test_get "/api/v1/uploads/test-key/download" "Ø±Ø§Ø¨Ø· ØªØ­Ù…ÙŠÙ„ Ø¨Ø¯ÙˆÙ† token" "401"

# â•â•â• Ø§Ù„Ù…Ø±Ø­Ù„Ø© 5: Connectors Endpoints â•â•â•
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "ğŸ”Œ Ø§Ù„Ù…Ø±Ø­Ù„Ø© 5: Connectors Endpoints"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"

# Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ÙˆØµÙ„Ø§Øª
test_get "/api/v1/connectors" "Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ÙˆØµÙ„Ø§Øª Ø¨Ø¯ÙˆÙ† token" "401"

# Ø¥Ù†Ø´Ø§Ø¡ Ù…ÙˆØµÙ„
test_post "/api/v1/connectors" "Ø¥Ù†Ø´Ø§Ø¡ Ù…ÙˆØµÙ„ Ø¨Ø¯ÙˆÙ† token" '{"type":"google","name":"test"}' "401"

# Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…ÙˆØµÙ„
test_get "/api/v1/connectors/test-connector-id" "Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…ÙˆØµÙ„ Ø¨Ø¯ÙˆÙ† token" "401"

# ØªØ­Ø¯ÙŠØ« Ù…ÙˆØµÙ„
test_post "/api/v1/connectors/test-connector-id" "ØªØ­Ø¯ÙŠØ« Ù…ÙˆØµÙ„ Ø¨Ø¯ÙˆÙ† token" "{}" "401"

# Ø­Ø°Ù Ù…ÙˆØµÙ„
test_post "/api/v1/connectors/test-connector-id/delete" "Ø­Ø°Ù Ù…ÙˆØµÙ„ Ø¨Ø¯ÙˆÙ† token" "{}" "401"

# â•â•â• Ø§Ù„Ù…Ø±Ø­Ù„Ø© 6: Settings Endpoints â•â•â•
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "âš™ï¸  Ø§Ù„Ù…Ø±Ø­Ù„Ø© 6: Settings Endpoints"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"

# Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
test_get "/api/v1/settings" "Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¨Ø¯ÙˆÙ† token" "401"

# Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¥Ø¹Ø¯Ø§Ø¯
test_get "/api/v1/settings/test-key" "Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¥Ø¹Ø¯Ø§Ø¯ Ø¨Ø¯ÙˆÙ† token" "401"

# ØªØ­Ø¯ÙŠØ« Ø¥Ø¹Ø¯Ø§Ø¯
test_post "/api/v1/settings/test-key" "ØªØ­Ø¯ÙŠØ« Ø¥Ø¹Ø¯Ø§Ø¯ Ø¨Ø¯ÙˆÙ† token" '{"value":"test"}' "401"

# Ø­Ø°Ù Ø¥Ø¹Ø¯Ø§Ø¯
test_post "/api/v1/settings/test-key/delete" "Ø­Ø°Ù Ø¥Ø¹Ø¯Ø§Ø¯ Ø¨Ø¯ÙˆÙ† token" "{}" "401"

# â•â•â• Ø§Ù„Ù…Ø±Ø­Ù„Ø© 7: Workspaces Endpoints â•â•â•
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "ğŸ—‚ï¸  Ø§Ù„Ù…Ø±Ø­Ù„Ø© 7: Workspaces Endpoints"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"

# Ù‚Ø§Ø¦Ù…Ø© Ù…Ø³Ø§Ø­Ø§Øª Ø§Ù„Ø¹Ù…Ù„
test_get "/api/v1/workspaces" "Ù‚Ø§Ø¦Ù…Ø© Ù…Ø³Ø§Ø­Ø§Øª Ø§Ù„Ø¹Ù…Ù„ Ø¨Ø¯ÙˆÙ† token" "401"

# Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø³Ø§Ø­Ø© Ø¹Ù…Ù„
test_post "/api/v1/workspaces" "Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø³Ø§Ø­Ø© Ø¹Ù…Ù„ Ø¨Ø¯ÙˆÙ† token" '{"name":"test"}' "401"

# Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ø³Ø§Ø­Ø© Ø¹Ù…Ù„
test_get "/api/v1/workspaces/test-workspace-id" "Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ø³Ø§Ø­Ø© Ø¹Ù…Ù„ Ø¨Ø¯ÙˆÙ† token" "401"

# â•â•â• Ø§Ù„Ù…Ø±Ø­Ù„Ø© 8: Admin Endpoints â•â•â•
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "ğŸ‘‘ Ø§Ù„Ù…Ø±Ø­Ù„Ø© 8: Admin Endpoints"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"

# Ù‚Ø§Ø¦Ù…Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
test_get "/api/v1/admin/users" "Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø¨Ø¯ÙˆÙ† token" "401"

# Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù†Ø¸Ø§Ù…
test_get "/api/v1/admin/stats" "Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù†Ø¸Ø§Ù… Ø¨Ø¯ÙˆÙ† token" "401"

# Ø³Ø¬Ù„Ø§Øª Ø§Ù„ØªØ¯Ù‚ÙŠÙ‚
test_get "/api/v1/admin/audit-logs" "Ø³Ø¬Ù„Ø§Øª Ø§Ù„ØªØ¯Ù‚ÙŠÙ‚ Ø¨Ø¯ÙˆÙ† token" "401"

# â•â•â• Ø§Ù„Ù…Ø±Ø­Ù„Ø© 9: WebSocket Endpoints â•â•â•
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "ğŸ”„ Ø§Ù„Ù…Ø±Ø­Ù„Ø© 9: WebSocket Endpoints"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"

# Ø§Ø®ØªØ¨Ø§Ø± WebSocket (Ù…Ø¬Ø±Ø¯ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…Ù†ÙØ°)
if nc -z localhost 8000; then
    log_test "WebSocket endpoint Ù…ØªØ§Ø­" "pass"
else
    log_test "WebSocket endpoint Ù…ØªØ§Ø­" "fail"
fi

# â•â•â• Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© â•â•â•
echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
if [ $FAILED -eq 0 ]; then
    echo "âœ… Ù†Ø¬Ø­Øª Ø¬Ù…ÙŠØ¹ Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª API Endpoints! ($TOTAL_TESTS/$TOTAL_TESTS)"
    echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
    exit 0
else
    echo "âŒ ÙØ´Ù„ $FAILED Ù…Ù† $TOTAL_TESTS Ø§Ø®ØªØ¨Ø§Ø±"
    echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
    exit 1
fi
